---
import Base from "@/layouts/Base.astro";
import PostSingle from "@/layouts/PostSingle.astro";
import { getSinglePage } from "@/lib/contentParser.astro";
import type { Language } from "../../../types/language.type";

export async function getStaticPaths() {
  var paths = new Array();
  for (var lang of ["en", "nl"]) {
    const BLOG_FOLDER = ((lang == "nl") ? "blogNL" : "blogEN");
    const posts = await getSinglePage(BLOG_FOLDER);

    const paths2 = posts.map((post) => ({
      params: {
        single: post.id,
        lang: lang,
      },
      props: { post },
    }));
    paths = paths.concat(paths2);
  }
  return paths;  
}

const lang = Astro.params.lang as Language;
const post = Astro.props.post;
const { title, meta_title, description, image } = post.data;
---

<Base
  title={title}
  meta_title={meta_title}
  description={description}
  image={image}
>
  <PostSingle post={post} lang={lang}/>
</Base>
